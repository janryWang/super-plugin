!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(n.Superplugin=n.Superplugin||{})}(this,function(n){"use strict";function e(n){function e(e,r,o){return function(e){var u=new n(e),c=f(o,e);t(u._beforeProcess)&&u._beforeProcess(e);var i=r.call(u,e,c);return t(u._afterProcess)&&u._afterProcess(i),i}}function r(n){return P[n]?P[n]:(P[n]=g(n).replace(/process/i,""),P[n])}function a(n,o){if(u(n))b(n,function(n,e){a(e,n)});else{if(n=r(n),!t(o))return;j[n]=e(n,o,j[n])}}function p(n,e,o){return c(n)&&n.length&&(n=r(n),t(j[n]))?j[n](e):y(o,e)}function l(n,e){if(!d(e))return cached[n];cached[n]=e}function h(n){o(n)?b(n,function(n){return h(n)}):t(n)?n(O):a(n)}var j=s(),P=s();n=n||i();var O={process:a,post:p,extension:h,cache:l};return n.prototype=v(n.prototype,O),O}var r=function(n){return function(e){return null!=e&&Object.prototype.toString.call(e)==="[object "+n+"]"}},t=r("Function"),o=Array.isArray||r("Array"),u=r("Object"),c=r("String"),i=function(n){return function(){return n}},f=function(n,e){return t(n)?n:i(e)},a=function(n){return c(n)?n:""},s=function(){return Object.create(null)},p=Object.prototype.hasOwnProperty,l=function(n,e){return p.call(n,e)},d=function(n){return void 0!==n&&null!==n},y=function(n,e){return d(n)?n:e},v=function(n,e){for(var r in e)n[r]=e[r];return n},b=function(n,e){if(t(e))if(o(n))for(var r=0,u=n.length;r<u&&!1!==e(n[r],r);r++);else for(var c in n)if(l(n,c)&&!1===e(n[c],c))break},g=function(n){return a(n).toLowerCase()};n.createPluginService=e,Object.defineProperty(n,"__esModule",{value:!0})});