!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(n.Superplugin=n.Superplugin||{})}(this,function(n){"use strict";function e(n){function e(e,r,o){return function(e){var u=new n(e),c=f(o,e);t(u.beforeEach)&&u.beforeEach(e);var i=r.call(u,e,c);return t(u.afterEach)&&u.afterEach(i),i}}function r(n){return O[n]?O[n]:(O[n]=b(n).replace(/process/i,""),O[n])}function a(n,o){if(u(n))v(n,function(n,e){a(e,n)});else{if(n=r(n),!t(o))return;j[n]=e(n,o,j[n])}}function l(n,e,o){return c(n)&&n.length&&(n=r(n),t(j[n]))?j[n](e):y(o,e)}function s(n,e){if(!d(e))return cached[n];cached[n]=e}function g(n){o(n)?v(n,function(n){return g(n)}):t(n)?n(S):a(n)}var j=p(),O=p();n=n||i();var S={process:a,post:l,extension:g,cache:s};return n.prototype=h(n.prototype,S),S}var r=function(n){return function(e){return null!=e&&Object.prototype.toString.call(e)==="[object "+n+"]"}},t=r("Function"),o=Array.isArray||r("Array"),u=r("Object"),c=r("String"),i=function(n){return function(){return n}},f=function(n,e){return t(n)?n:i(e)},a=function(n){return c(n)?n:""},p=function(){return Object.create(null)},l=Object.prototype.hasOwnProperty,s=function(n,e){return l.call(n,e)},d=function(n){return void 0!==n&&null!==n},y=function(n,e){return d(n)?n:e},h=function(n,e){for(var r in e)n[r]=e[r];return n},v=function(n,e){if(t(e))if(o(n))for(var r=0,u=n.length;r<u&&!1!==e(n[r],r);r++);else for(var c in n)if(s(n,c)&&!1===e(n[c],c))break},b=function(n){return a(n).toLowerCase()};n.createPluginService=e,Object.defineProperty(n,"__esModule",{value:!0})});